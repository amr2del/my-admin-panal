# دليل إعداد تطبيق سطح المكتب

## نظرة عامة
تم تحويل الموقع إلى تطبيق سطح مكتب باستخدام Electron. الآن يمكنك تشغيل التطبيق كبرنامج مستقل على Windows، Mac، و Linux.

## المتطلبات
- Node.js (الإصدار 16 أو أحدث)
- npm أو yarn

## خطوات التثبيت والتشغيل

### 1. تثبيت الحزم المطلوبة
```bash
npm install
```

### 2. تشغيل التطبيق في وضع التطوير
```bash
npm start
```

### 3. بناء التطبيق للتوزيع

#### لنظام Windows:
```bash
npm run build-win
```
سيتم إنشاء ملف تثبيت `.exe` في مجلد `dist/`

#### لنظام macOS:
```bash
npm run build-mac
```
سيتم إنشاء ملف `.dmg` في مجلد `dist/`

#### لنظام Linux:
```bash
npm run build-linux
```
سيتم إنشاء ملفات `.AppImage` و `.deb` في مجلد `dist/`

#### بناء لجميع الأنظمة:
```bash
npm run build
```

## الملفات الجديدة المضافة

### 1. main.js
الملف الرئيسي لـ Electron الذي يتحكم في:
- إنشاء نافذة التطبيق
- إعدادات النافذة (الحجم، الأيقونة، إلخ)
- القوائم (Menu)
- إدارة دورة حياة التطبيق

### 2. preload.js
سكريبت آمن يعمل كجسر بين renderer process و main process

### 3. package.json
ملف تكوين npm يحتوي على:
- معلومات التطبيق
- التبعيات المطلوبة
- أوامر npm للتشغيل والبناء
- إعدادات electron-builder

## المميزات

✅ واجهة سطح المكتب الكاملة
✅ قوائم مخصصة بالعربية
✅ اختصارات لوحة المفاتيح
✅ حجم نافذة قابل للتعديل
✅ وضع ملء الشاشة
✅ أدوات المطور للتطوير
✅ أيقونة مخصصة (يمكن تغييرها)

## اختصارات لوحة المفاتيح

- `Ctrl+R` أو `F5`: تحديث
- `Ctrl+Q`: خروج
- `Ctrl+Plus`: تكبير
- `Ctrl+-`: تصغير
- `Ctrl+0`: حجم طبيعي
- `F11`: ملء الشاشة
- `F12`: أدوات المطور

## تخصيص الأيقونة

لتغيير أيقونة التطبيق، ضع ملفات الأيقونات التالية في المجلد الرئيسي:
- `icon.ico` لنظام Windows (256x256)
- `icon.icns` لنظام macOS
- `icon.png` لنظام Linux (512x512)

يمكنك إنشاء الأيقونات من صورة واحدة باستخدام أدوات مثل:
- https://www.icoconverter.com/
- https://iconverticons.com/online/

## الملاحظات الهامة

### التخزين المحلي
- جميع البيانات المخزنة في localStorage ستعمل بشكل طبيعي
- يتم حفظ البيانات في مجلد userData للتطبيق

### Google Sheets API
- إذا كنت تستخدم Google Sheets API، تأكد من إضافة عنوان `localhost` في إعدادات OAuth
- قد تحتاج إلى تحديث redirect URIs في Google Console

### الأمان
- التطبيق يستخدم `contextIsolation: true` و `nodeIntegration: false` للأمان
- جميع عمليات Node.js يجب أن تتم عبر main process

## حل المشاكل

### المشكلة: لا يتم تحميل الملفات الخارجية (CDN)
**الحل**: تأكد من أنك متصل بالإنترنت، أو قم بتحميل المكتبات محلياً

### المشكلة: خطأ في بناء التطبيق
**الحل**: تأكد من تثبيت جميع الحزم بشكل صحيح باستخدام `npm install`

### المشكلة: التطبيق لا يبدأ
**الحل**: افحص الأخطاء في وحدة التحكم باستخدام `npm start`

## التطوير المستقبلي

يمكنك إضافة مميزات إضافية مثل:
- التحديث التلقائي (auto-update)
- الإشعارات المكتبية (notifications)
- اختصارات نظام (system tray)
- قاعدة بيانات محلية (SQLite)
- طباعة مباشرة للفواتير
- دعم الباركود scanner

## الدعم

للمساعدة أو الإبلاغ عن مشاكل، يرجى فتح issue في المستودع.

---

**ملاحظة**: هذا التطبيق يعمل كـ standalone desktop app ولكنه لا يزال بحاجة إلى الإنترنت للوصول إلى:
- CDN libraries (Chart.js, Font Awesome)
- Google Sheets API (إذا كنت تستخدمه)

للحصول على تطبيق يعمل بدون إنترنت تماماً، قم بتحميل جميع المكتبات محلياً.
